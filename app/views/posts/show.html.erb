<div class="container">
    <h1 class="text-center">案件詳細</h1>
    <div class="row">
        <div class="col-md-12 col-sm-12 offset-md-12">
            <table class="table text-center">
                <thread>
                <tr>
                <th>Post_ID</th>
                <th>投稿者ID</th>
                <th>掲載日</th>
                <th>案件名</th>
                <th>販売価格</th>
                <th>経験</th>
                <th>備考</th>
                <th>お気に入り数</th>
                <th></th>
                <th></th>
                </tr>
                </thread>
                  <tbody>
                    <td><%= @post.id %></td>
                    <td><%= @post.user_id %></td>
                    <td><%= @post.created_at.to_s(:datetime_jp)  %></td>
                    <td><%= @post.title %></td>
                    <td><%= @post.price.to_s(:delimited) + "円"%></td>
                    <td><%= @post.experience %></td>
                    <td><%= @post.detail %></td>
                    <td><%= @favorite_count %></td>
                    <% if  user_signed_in? && @post.user_id != current_user.id %>
                      <td><%= link_to "購入ページ", new_post_purchase_path(@post.id), class: "btn btn-primary" %></td>
                    <% else %>
                     <td></td>
                    <% end %>
                    <% if not @post_favorite.present? %>
                      <td><%= link_to "お気に入り", post_favorites_path(@post.id), method: :post, class: "btn btn-primary" %></td>
                    <% else %>
                      <td><%= link_to "お気に入り済", post_favorite_path(post_id: @post, id: @post_favorite), method: :delete, class: "btn btn-secondary" %></td>
                    <% end %>
                  </tbody>
            </table>
            <div class="text-right">
              <%= link_to "戻る", :back %><br>
              <%= link_to "トップページ", root_path %><br>
            </div>
        </div>
    </div>
</div>
<div class="container">
  <h2 class="text-center">コメント</h2>
    <%= form_with(model: [@post, Comment.new], local: true) do |f| %>
      <div class="row">
        <div class="col-md-6 col-sm-6 offset-md-3">
          <div class="form-group">              
              <div class="field">
              <%= f.label "コメント" %>
              <%= f.text_field :comment,  autofocus: true, autocomplete: "comment", class: "form-control" %>
              </div><br>
              <%= f.hidden_field :post_id, value: @post.id %>
              <div class="actions text-right">
                <%= f.submit "送信する", class: "btn btn-primary" %>
              </div><br>
            </div>  
          </div>
      </div>
    <% end %>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-12 col-sm-12 offset-md-12">
            <table class="table text-center">
                <thread>
                <tr>
                <th>User_ID</th>
                <th>名前</th>
                <th>メッセージ</th>
                <th>投稿時間</th>
                <th></th>
                </tr>
                </thread>
                  <% @comments.each do |comment| %>
                    <tbody>
                      <td><%= comment.user.id %></td>
                      <td><%= comment.user.name %></td>
                      <td><%= comment.comment %></td>
                      <td><%= comment.created_at.to_s(:datetime_jp) %></td>
                      <% if user_signed_in? && current_user.id == comment.user.id %>
                        <td><%= link_to "削除", post_comment_path(post_id: comment.post_id, id: comment.id), method: :delete, class: "btn btn-primary"%></td>
                      <% else %>
                        <td></td>
                      <% end%>
                    </tbody>
                  <% end %>
            </table>
        </div>
    </div>
</div>

